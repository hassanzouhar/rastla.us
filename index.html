<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hassan Zouhar - Portfolio</title>
    <!-- tsParticles library (single dependency) -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>

    <style>
        /* Basic Reset & Fullscreen Setup */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow-x: hidden; /* Prevent horizontal scroll */
            overflow-y: auto;   /* Allow vertical scroll if content needs it */
            font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: radial-gradient(ellipse at center, #181830 0%, #050510 75%);
            background-color: #050510;
            position: relative;
            color: #e8e8ff; /* Default text color */
        }

        /* Particle Container */
        #tsparticles {
            position: fixed; /* Keep particles fixed in viewport */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        /* Content Wrapper */
        .content-wrapper {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            /* justify-content: center; /* Centering handled by home section when active */
            align-items: center;
            min-height: 100vh;
            text-align: center; /* Default alignment */
            padding: 80px 20px 40px 20px; /* Added top padding for nav, bottom padding */
            box-sizing: border-box;
            width: 100%;
        }

        /* --- Navigation Menu --- */
        #main-nav {
            position: fixed; /* Fixed at the top */
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(10, 10, 20, 0.85); /* Semi-transparent background */
            backdrop-filter: blur(5px);
            padding: 10px 0;
            z-index: 10; /* Above content */
            display: flex;
            justify-content: center;
            border-bottom: 1px solid rgba(120, 120, 170, 0.3);
        }
        #main-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            gap: 25px; /* Space between items */
        }
        #main-nav li a {
            color: #c0c0ff;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 300;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer; /* Ensure pointer cursor */
        }
        #main-nav li a:hover,
        #main-nav li a.active { /* Add class for active state */
            color: #ffffff;
            text-shadow: 0 0 6px rgba(200, 200, 255, 0.6);
        }

        /* Page Sections for Content Switching */
        .page-section {
            width: 100%;
            max-width: 850px; /* Max width for readable content */
            margin: 0 auto; /* Center the section */
            padding-top: 20px; /* Space below nav */
            text-align: left; /* Align markdown content left */

            /* --- Animation/Transition Control --- */
            opacity: 0;
            visibility: hidden; /* Hidden by default */
            transition: opacity 0.3s ease-in-out, visibility 0s linear 0.3s; /* Fade out takes 0.3s, hide afterwards */
            position: absolute; /* Take out of flow to prevent height jumps */
            left: 0;
            right: 0; /* Center within content-wrapper */
            /* Important: Add top offset matching the nav height + content padding */
            top: 80px; /* Adjust if nav/padding changes */
        }
        .page-section.active {
             opacity: 1;
             visibility: visible; /* Make visible */
             transition-delay: 0.1s; /* Slight delay for fade-in after fade-out starts */
             position: relative; /* Put back into normal flow when active */
             /* Override the visibility transition delay for showing */
             transition: opacity 0.4s ease-in-out 0.1s, visibility 0s linear 0s;
             top: 0; /* Reset top offset when active */
        }

        /* Specific styling for home content (ensure it still centers) */
        #home-content {
             padding-top: 0; /* Reset padding */
             text-align: center; /* Restore center alignment */
             max-width: none; /* Allow full width */
             width: 100%; /* Ensure it takes full width */
        }
         /* When home is active, it should behave like other active sections */
        #home-content.active {
            /* Inherits active styles (opacity, visibility, position: relative) */
            /* Add back flex centering specifically for home when active */
             display: flex;
             flex-direction: column;
             justify-content: center;
             align-items: center;
             min-height: calc(100vh - 120px); /* Adjust based on top/bottom padding */
        }


        /* Logo Styling */
        .logo {
            font-size: 4rem;
            font-weight: 200;
            letter-spacing: 3px;
            margin-bottom: 20px;
            text-transform: lowercase;
            color: #f0f0ff;
            text-shadow: 0 0 12px rgba(200, 200, 255, 0.7), 0 0 25px rgba(200, 200, 255, 0.5), 0 0 45px rgba(180, 180, 255, 0.3);
            animation: subtlePulseGlow 5s infinite alternate ease-in-out;
            white-space: nowrap;
        }
        .cursor { display: inline-block; opacity: 1; animation: blink 1.1s steps(1, start) infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes subtlePulseGlow {
             from { text-shadow: 0 0 10px rgba(200, 200, 255, 0.6), 0 0 20px rgba(200, 200, 255, 0.4), 0 0 35px rgba(180, 180, 255, 0.2); }
             to { text-shadow: 0 0 15px rgba(210, 210, 255, 0.8), 0 0 30px rgba(210, 210, 255, 0.6), 0 0 55px rgba(190, 190, 255, 0.4); }
        }

        /* Subtitle Styling */
        .subtitle { font-size: 1.3rem; font-weight: 300; color: #c0c0ff; max-width: 650px; line-height: 1.7; text-shadow: 0 0 6px rgba(180, 180, 255, 0.25); margin-bottom: 30px; }

        /* Social Icons */
        .social-icons { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 20px; }
        .social-icons a { display: inline-block; color: #c0c0ff; transition: color 0.3s ease, transform 0.3s ease; }
        .social-icons a:hover { color: #ffffff; transform: scale(1.1); }
        .social-icons svg { width: 28px; height: 28px; fill: currentColor; vertical-align: middle; }

        /* Styling for Markdown Rendered Content */
        .markdown-content {
            line-height: 1.7;
            color: #d0d0e0; /* Slightly dimmer than main titles for readability */
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
             color: #e8e8ff;
             margin-top: 1.8em;
             margin-bottom: 0.6em;
             padding-bottom: 0.2em;
             border-bottom: 1px solid rgba(120, 120, 170, 0.3);
        }
        .markdown-content h1 { font-size: 2rem; }
        .markdown-content h2 { font-size: 1.6rem; }
        .markdown-content p { margin-bottom: 1.2em; }
        .markdown-content strong { font-weight: 600; color: #fff; }
        .markdown-content em { font-style: italic; color: #f0f0f0; }
        .markdown-content code { /* Inline code */
             background-color: rgba(255, 255, 255, 0.1);
             padding: 0.2em 0.4em;
             border-radius: 3px;
             font-family: 'Courier New', Courier, monospace;
             font-size: 0.9em;
             color: #a0e0a0;
        }
        .markdown-content pre { /* Code block */
             background-color: rgba(0, 0, 0, 0.3);
             padding: 1em;
             border-radius: 5px;
             overflow-x: auto;
             font-family: 'Courier New', Courier, monospace;
             line-height: 1.4;
             margin-bottom: 1.2em;
        }
        .markdown-content pre code { background-color: transparent; padding: 0; font-size: 1em; }
        .markdown-content a { color: #9eb7ff; text-decoration: none; border-bottom: 1px dotted #9eb7ff; transition: color 0.3s ease, border-color 0.3s ease;}
        .markdown-content a:hover { color: #ffffff; border-bottom-color: #ffffff; }
        .markdown-content hr {
            border: none;
            border-top: 1px solid rgba(120, 120, 170, 0.3);
            margin: 2em 0;
        }
        .loading-placeholder, .error-placeholder {
            font-style: italic;
            color: #888;
            text-align: center;
            padding: 40px 0;
        }
        .error-placeholder { color: #ff8080; }


        /* Media Queries */
        @media (max-width: 768px) {
            .content-wrapper { padding-top: 70px; padding-bottom: 30px; } /* Adjust padding for fixed nav */
            .page-section { top: 70px; } /* Adjust absolute positioning */
            .logo { font-size: 3rem; }
            .subtitle { font-size: 1.1rem; margin-bottom: 25px;}
            .social-icons svg { width: 26px; height: 26px; }
            .social-icons { gap: 15px; }
            #main-nav ul { gap: 15px; }
            #main-nav li a { font-size: 1rem; padding: 4px 8px;}
            .markdown-content h1 { font-size: 1.8rem; }
            .markdown-content h2 { font-size: 1.4rem; }
        }
         @media (max-width: 480px) {
            .content-wrapper { padding-top: 60px; padding-left: 10px; padding-right: 10px;}
            .page-section { top: 60px; } /* Adjust absolute positioning */
            .logo { font-size: 2.2rem; letter-spacing: 2px; }
            .subtitle { font-size: 1rem; }
            .social-icons svg { width: 24px; height: 24px; }
            #main-nav ul { gap: 10px; }
            #main-nav li a { font-size: 0.9rem; padding: 3px 6px;}
            .markdown-content h1 { font-size: 1.6rem; }
            .markdown-content h2 { font-size: 1.3rem; }
        }

    </style>
</head>
<body>

    <!-- The container for the tsParticles simulation -->
    <div id="tsparticles"></div>

    <!-- The content area -->
    <div class="content-wrapper">

        <!-- Navigation Menu -->
        <nav id="main-nav">
            <ul>
                <li><a href="#home" class="nav-link active">Home</a></li>
                <li><a href="#projects" class="nav-link">Projects</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
            </ul>
        </nav>

        <!-- Home Section (Visible by default) -->
        <div id="home-content" class="page-section active">
            <h1 class="logo">> hassanzouhar <span class="cursor">_</span></h1>
            <p class="subtitle">Bygger tech som funker, team som blomstrer, og retninger som varer. Elsker folk, teknologi og kaos – i den rekkefølgen.</p>
            <div class="social-icons">
                <!-- GitHub Icon -->
                <a href="https://github.com/hassanzouhar" target="_blank" rel="noopener noreferrer" aria-label="GitHub Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
                </a>
                <!-- LinkedIn Icon -->
                <a href="https://www.linkedin.com/in/hassanzouhar/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn Profile">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg>
                </a>
                <!-- Email Icon -->
                 <a href="mailto:hassan.zouhar@proton.me" aria-label="Email">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"/></svg>
                </a>
            </div>
        </div>

        <!-- Projects Section (Hidden by default) -->
        <div id="projects-content" class="page-section">
             <!-- Content loaded from projects.md -->
             <div class="markdown-content" data-source="projects.md">
                 <p class="loading-placeholder">Loading projects...</p>
             </div>
        </div>

        <!-- About Section (Hidden by default) -->
        <div id="about-content" class="page-section">
            <!-- Content loaded from about.md -->
            <div class="markdown-content" data-source="about.md">
                <p class="loading-placeholder">Loading about info...</p>
            </div>
        </div>

    </div><!-- end .content-wrapper -->


    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            console.log("DOM Content Loaded"); // Debug

            // --- tsParticles Initialization ---
            const particlesConfig = {
                 fpsLimit: 60, particles: { number: { value: 180, density: { enable: true, value_area: 1100 } }, color: { value: ["#6a6aff", "#8f8fff", "#b0b0ff", "#4f4fff", "#60d0d0"] }, shape: { type: "circle" }, opacity: { value: { min: 0.05, max: 0.7 }, animation: { enable: true, speed: 0.7, minimumValue: 0.05, sync: false, startValue: "random" } }, size: { value: { min: 1, max: 4 }, animation: { enable: true, speed: 3, minimumValue: 0.5, sync: false, startValue: "random", destroy: "none" } }, links: { enable: true, distance: 140, color: "#606090", opacity: 0.1, width: 1.2, triangles: { enable: true, color: "#101030", opacity: 0.03 } }, move: { enable: true, speed: 1.0, direction: "bottom-right", random: true, straight: false, outModes: { default: "bounce" }, attract: { enable: true, distance: 200, rotate: { x: 3500, y: 3500 } } } }, interactivity: { detectsOn: "window", events: { onHover: { enable: true, mode: "grab", parallax: { enable: false } }, onClick: { enable: true, mode: "push" }, resize: { enable: true, delay: 0.5 } }, modes: { grab: { distance: 200, links: { blink: false, consent: false, opacity: 0.9, color: "#ffffff" } }, bubble: { distance: 150, size: 6, opacity: 1, duration: 0.8, mix: false }, repulse: { distance: 100, duration: 0.4, factor: 100, speed: 1, maxSpeed: 50, easing: "ease-out-quad" }, push: { quantity: 4 }, remove: { quantity: 2 } } }, detectRetina: true
            };
             tsParticles.load("tsparticles", particlesConfig)
                .then(container => console.log("tsParticles simulation loaded."))
                .catch(error => console.error("Error loading tsParticles:", error));

            // --- Navigation and Content Loading Logic ---
            const mainNav = document.getElementById('main-nav');
            const navLinks = document.querySelectorAll('.nav-link'); // Used for setting active class
            const pageSections = document.querySelectorAll('.page-section');
            const contentCache = {}; // Simple cache for fetched markdown

            console.log("Elements selected:", { mainNav: !!mainNav, navLinks: navLinks.length, pageSections: pageSections.length }); // Debug

            // --- Basic Markdown Parser ---
            function parseBasicMarkdown(md) {
                let html = md.trim();
                // Code blocks (``` lang \n code \n ```)
                html = html.replace(/```(.*?)?\n([\s\S]*?)\n```/g, (match, lang, code) => {
                    const languageClass = lang ? ` class="language-${lang.trim()}"` : '';
                    // Basic escaping for HTML within code blocks
                    const escapedCode = code.replace(/</g, '<').replace(/>/g, '>');
                    return `<pre><code${languageClass}>${escapedCode.trim()}</code></pre>`;
                });
                // Headings per line (#, ##)
                html = html.split('\n').map(line => {
                    line = line.trim();
                    if (line.startsWith('## ')) return `<h2>${line.substring(3)}</h2>`;
                    if (line.startsWith('# ')) return `<h1>${line.substring(2)}</h1>`;
                    return line;
                }).join('\n');
                // Paragraphs and inline elements
                html = html.split('\n\n').map(paragraph => {
                    paragraph = paragraph.trim();
                    if (!paragraph) return '';
                    // Keep pre-formatted blocks (headings, code blocks)
                    if (/^<h[1-6]>/.test(paragraph) || /^<pre>/.test(paragraph)) {
                        return paragraph;
                    }
                    // Inline: Bold, Italic, Links, Inline Code
                    paragraph = paragraph
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                        .replace(/(?<!\*)\*(?!\*)(.*?)(?<!\*)\*(?!\*)/g, '<em>$1</em>') // Italic (simple)
                        .replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>') // Links
                        .replace(/`(.*?)`/g, '<code>$1</code>'); // Inline code
                    // Wrap in <p> and convert single newlines to <br> within paragraphs
                    return `<p>${paragraph.replace(/(?<!\n)\n(?!\n)/g, '<br>')}</p>`;
                }).join('\n'); // Join paragraphs back
                return html;
            }


            // --- Content Fetching Function ---
            async function fetchAndDisplayMarkdown(sourceFile, targetElement) {
                 console.log(`Fetching ${sourceFile}`); // Debug
                 if (contentCache[sourceFile]) {
                    console.log(`Using cache for ${sourceFile}`); // Debug
                    targetElement.innerHTML = contentCache[sourceFile];
                    return; // Use cached content
                 }

                 targetElement.innerHTML = `<p class="loading-placeholder">Loading ${sourceFile}...</p>`; // Show loading message

                 try {
                    const response = await fetch(sourceFile);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status} for ${sourceFile}`);
                    }
                    const markdownText = await response.text();
                    const htmlContent = parseBasicMarkdown(markdownText);
                    contentCache[sourceFile] = htmlContent; // Cache the result
                    targetElement.innerHTML = htmlContent;
                    console.log(`Successfully loaded and parsed ${sourceFile}`); // Debug
                 } catch (error) {
                    console.error(`Error fetching or parsing ${sourceFile}:`, error);
                    targetElement.innerHTML = `<p class="error-placeholder">Could not load content from ${sourceFile}. Check file exists and browser console.</p>`;
                    delete contentCache[sourceFile]; // Don't cache errors
                 }
            }

            // --- Navigation Click Handler (using event delegation) ---
            function handleNavClick(event) {
                console.log("Nav area clicked", event.target); // Debug

                // Find the closest ancestor link element that is a direct child li>a of the nav
                const clickedLink = event.target.closest('#main-nav ul li a.nav-link');

                // If the click wasn't on a relevant link, ignore it
                if (!clickedLink) {
                     console.log("Click was not on a nav-link, ignoring."); // Debug
                     return;
                }

                event.preventDefault(); // Prevent default anchor jump

                const targetId = clickedLink.getAttribute('href').substring(1); // Get 'home', 'projects', 'about'
                const newTargetSection = document.getElementById(`${targetId}-content`);
                const currentActiveSection = document.querySelector('.page-section.active');
                const currentActiveLink = document.querySelector('.nav-link.active');

                console.log(`Target ID: ${targetId}`); // Debug

                // Do nothing if clicking the already active link/section
                if (currentActiveSection === newTargetSection) {
                    console.log("Clicked on the currently active section. No change.");
                    return;
                }

                // --- Update Nav Link Styling ---
                if (currentActiveLink) {
                    currentActiveLink.classList.remove('active');
                }
                clickedLink.classList.add('active');
                console.log("Updated active link class"); // Debug

                // --- Switch Sections with Animation ---
                // 1. Hide the current section (if one exists and is different)
                if (currentActiveSection) {
                    currentActiveSection.classList.remove('active');
                    console.log(`Hiding section: ${currentActiveSection.id}`); // Debug
                }

                // 2. Show the new section (if it exists)
                if (newTargetSection) {
                    console.log(`Showing section: ${newTargetSection.id}`); // Debug
                    newTargetSection.classList.add('active'); // Add active class to trigger fade-in via CSS

                    // 3. Load content if needed (only for the new section)
                    const markdownContainer = newTargetSection.querySelector('.markdown-content');
                    if (markdownContainer && markdownContainer.dataset.source) {
                        const sourceFile = markdownContainer.dataset.source;
                        // Fetch content (function handles caching)
                        fetchAndDisplayMarkdown(sourceFile, markdownContainer);
                    }
                } else {
                     console.error(`No page section found with ID: ${targetId}-content`); // Debug
                }


                // Scroll to top when changing sections (optional - happens immediately)
                 if (targetId !== 'home') { // Don't scroll top if navigating back to home
                     // Check if user prefers reduced motion
                     const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                     window.scrollTo({
                         top: 0,
                         behavior: prefersReducedMotion ? 'auto' : 'smooth'
                     });
                 }
            }

            // --- Attach Single Event Listener to Nav ---
            if (mainNav) {
                mainNav.addEventListener('click', handleNavClick);
                console.log("Event listener attached to mainNav"); // Debug
            } else {
                console.error("Main navigation element (#main-nav) not found!"); // Debug
            }

            // --- Initialize Page State ---
            // Ensure only home is visible initially and home link is active
            pageSections.forEach(section => {
                 section.classList.toggle('active', section.id === 'home-content');
            });
            navLinks.forEach(link => {
                 link.classList.toggle('active', link.getAttribute('href') === '#home');
            });
            console.log("Initial page state set."); // Debug

        });
    </script>

</body>
</html>